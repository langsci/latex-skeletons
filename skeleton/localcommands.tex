\newcommand{\appref}[1]{Appendix \ref{#1}}
\newcommand{\fnref}[1]{Footnote \ref{#1}} 

\newenvironment{langscibars}{\begin{axis}[ybar,xtick=data, xticklabels from table={\mydata}{pos}, 
        width  = \textwidth,
	height = .3\textheight,
    	nodes near coords, 
	xtick=data,
	x tick label style={},  
	ymin=0,
	cycle list name=langscicolors
        ]}{\end{axis}}
        
\newcommand{\langscibar}[1]{\addplot+ table [x=i, y=#1] {\mydata};\addlegendentry{#1};}

\newcommand{\langscidata}[1]{\pgfplotstableread{#1}\mydata;}


\makeatletter
\let\theauthor\@author %store in more accessible format
\makeatother 
 
\newcommand{\lsFirstAuthorFullName}{}%temporary, will be overwritten
\newcommand{\lsFirstAuthorFirstName}{}%temporary, will be overwritten
\newcommand{\lsFirstAuthorLastName}{}%temporary, will be overwritten
\newcommand{\lsFirstAuthorString}{\lsFirstAuthorLastName, \lsFirstAuthorFirstName} %can be customized in localmetadata.tex
\newcommand{\lsNonFirstAuthorsString}{}  %default, will be overwritten iff more than one author
\newcommand{\lsImpressionCitationAuthor}{\lsFirstAuthorString \lsNonFirstAuthorsString}


\renewcommand{\and}{NONLASTAND} %expand for easier checking. Might need to be undone later on
\renewcommand{\lastand}{LASTAND} %expand for easier checking

\IfSubStr{\theauthor}{NONLASTAND}{%2+authors
  \renewcommand{\lsFirstAuthorFullName}{\StrBefore{\theauthor}{\and }}
  \renewcommand{\lsFirstAuthorFirstName}{\StrBefore{\theauthor}{ }} 
  \renewcommand{\lsFirstAuthorLastName}{\StrBetween{\theauthor}{ }{\and }}
  \renewcommand{\lsNonFirstAuthorsString}{\and\StrBehind{\theauthor}{\and }} 
  }{%else
    \IfSubStr{\theauthor}{LASTAND}{%less than two authors, more than one
    \renewcommand{\lsFirstAuthorFullName}{\StrBefore{\theauthor}{\lastand }}
    \renewcommand{\lsFirstAuthorFirstName}{\StrBefore{\theauthor}{ }}
    \renewcommand{\lsFirstAuthorLastName}{\StrBetween{\theauthor}{ }{\lastand }}
    \renewcommand{\lsNonFirstAuthorsString}{\lastand\StrBehind{\theauthor}{\lastand }} 
    }{%else exactly one author
      \renewcommand{\lsFirstAuthorFirstName}{\StrBefore{\theauthor}{ }}
      \renewcommand{\lsFirstAuthorLastName}{\StrBehind{\theauthor}{ }}
      }
    }   